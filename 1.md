**Приложение A: Конфигурация сетевой среды и интеграция с FreeIPA/Active Directory**

### 1. Настройка прокси-сервера для загрузки пакетов (APT)

```
Acquire::http::proxy "http://fepo:fepo18@10.0.0.67:3128";
Acquire::https::proxy "http://fepo:fepo18@10.0.0.67:3128";
Acquire::ftp::proxy "http://fepo:fepo18@10.0.0.67:3128";
```

### 2. Настройка сетевых интерфейсов

```
auto eth0
iface eth0 inet static
address 192.168.88.30/24
gateway 192.168.88.1
dns-nameservers 192.168.88.30 192.168.88.21
```

### 3. Файл `/etc/hosts`

```
127.0.0.1 localhost localhost.localdomain
192.168.88.21 demolab.demo.lab demo.lab demo
192.168.88.30 dc.aldpro.lab dc
192.168.88.38 client.aldpro.lab client
```

### 4. Файл `/etc/resolv.conf`

```
search dc aldpro.lab demo.lab
nameserver 127.0.0.1
nameserver 192.168.88.30
nameserver 192.168.88.21
```

### 5. Параметры ядра для безопасности (файл `/etc/sysctl.conf`)

```
kernel.sysrq = 0
fs.suid_dumpable = 0
kernel.randomize_va_space = 2
net.ipv4.tcp_timestamps = 0
net.ipv6.conf.all.disable_ipv6 = 1
```

### 6. Интеграция с FreeIPA (пример команд)

```
sudo ipa-adtrust-install
ipa trust-add --type=ad demo.lab --range-type ipa-ad-trust --admin Administrator --password --two-way TRUE
```

### 7. Добавление хостов в FreeIPA с одноразовыми паролями

```
ipa host-add astra.aldpro.lab --random --ip-address=192.168.88.31 --force
ipa host-add cl1.aldpro.lab --random --ip-address=192.168.88.60 --force
```

### 8. Установка клиента FreeIPA

```
sudo ipa-client-install --mkhomedir --password='0Pb9nRHo7EaIioWRpxWaKkS' -U
```

### 9. Пароль для LDAP-администратора

```
sudo ldappasswd -ZZ -D 'cn=Directory Manager' -W -S uid=admin,cn=users,cn=accounts,dc=aldpro,dc=lab -H ldap://dc.aldpro.lab
```

### 10. Очистка кеша Kerberos

```
kdestroy -A
kinit admin
```

### 11. Распределение IP-адресов в сети (сводка)

```
demolab 192.168.88.21
aldpro 192.168.88.30
iwdm-db 192.168.88.31
iwdm-server 192.168.88.32
iwdm-client-astra 192.168.88.33
iwdm-client-win 192.168.88.34
iwtm-server 192.168.88.35
iwtm-db 192.168.88.36
iwdd 192.168.88.37
CLIENT ALD 192.168.88.100
```

### 12. Пароли по умолчанию

```
Пароли: xxXX1234
```

### 13. Строка подключения к базе данных ViPNet Administrator

```
Data Source=172.20.30.2\SQLExpress; Initial Catalog=ViPNetAdministrator;User Id=KcaUser;Password=Number1
```
